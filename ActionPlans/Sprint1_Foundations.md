# Sprint 1 : Foundations - Plan d'Action D√©taill√©

## üìã Vue d'Ensemble

**Dur√©e** : 2 semaines  
**Objectif** : √âtablir les fondations solides du projet AI Ops Copilot  
**√âquipe** : 1-2 d√©veloppeurs  
**Priorit√©** : Critique

## üéØ Objectifs du Sprint

### Objectifs Principaux
1. **Infrastructure de base** : Configuration environnement de d√©veloppement
2. **Architecture modulaire** : Structure de projet extensible
3. **Logging centralis√©** : Syst√®me de logs structur√©s
4. **Configuration flexible** : Gestion des param√®tres externalis√©s
5. **Tests automatis√©s** : Framework de tests unitaires

### Objectifs Secondaires
- Documentation technique de base
- Scripts d'installation automatis√©s
- Monitoring basique des performances

## üì¶ Livrables

### Code Source
- [ ] Structure de projet modulaire
- [ ] Syst√®me de configuration centralis√©
- [ ] Framework de logging structur√©
- [ ] Tests unitaires de base
- [ ] Scripts d'installation

### Documentation
- [ ] Guide d'installation d√©veloppeur
- [ ] Documentation architecture
- [ ] Standards de codage
- [ ] Guide de contribution

### Configuration
- [ ] requirements.txt complet
- [ ] Configuration Docker
- [ ] Variables d'environnement
- [ ] Scripts de d√©ploiement

## üóìÔ∏è Planning D√©taill√©

### Semaine 1 : Infrastructure

#### Jour 1-2 : Setup Projet
**T√¢ches :**
- [ ] Initialiser repository Git avec structure modulaire
- [ ] Configurer environnement virtuel Python 3.11+
- [ ] Installer et configurer Ollama localement
- [ ] Cr√©er structure de dossiers standardis√©e

**Structure de dossiers :**
```
ai-ops-copilot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ core/           # Modules core
‚îÇ   ‚îú‚îÄ‚îÄ agents/         # Agents IA
‚îÇ   ‚îú‚îÄ‚îÄ collectors/     # Collecteurs de logs
‚îÇ   ‚îú‚îÄ‚îÄ parsers/        # Parseurs de logs
‚îÇ   ‚îú‚îÄ‚îÄ storage/        # Couche de stockage
‚îÇ   ‚îî‚îÄ‚îÄ interfaces/     # Interfaces utilisateur
‚îú‚îÄ‚îÄ config/             # Configurations
‚îú‚îÄ‚îÄ tests/              # Tests automatis√©s
‚îú‚îÄ‚îÄ docs/               # Documentation
‚îú‚îÄ‚îÄ scripts/            # Scripts utilitaires
‚îî‚îÄ‚îÄ data/               # Donn√©es de test
```

**Crit√®res d'acceptation :**
- Repository Git initialis√© avec .gitignore Python
- Environnement virtuel fonctionnel
- Ollama install√© et mod√®le Llama 3.1 t√©l√©charg√©
- Structure de dossiers cr√©√©e

#### Jour 3-4 : Configuration Syst√®me
**T√¢ches :**
- [ ] Cr√©er syst√®me de configuration centralis√© (config.yaml)
- [ ] Impl√©menter chargement variables d'environnement
- [ ] Configurer logging structur√© avec Loguru
- [ ] Cr√©er utilitaires de base (helpers, constants)

**Configuration type :**
```yaml
# config/config.yaml
app:
  name: "AI Ops Copilot"
  version: "0.1.0"
  debug: true

logging:
  level: "INFO"
  format: "json"
  file: "logs/app.log"
  rotation: "1 day"
  retention: "30 days"

ollama:
  host: "localhost"
  port: 11434
  model: "llama3.1:7b"
  timeout: 120

storage:
  type: "sqlite"
  path: "data/logs.db"
  pool_size: 10
```

**Crit√®res d'acceptation :**
- Configuration YAML charg√©e dynamiquement
- Variables d'environnement support√©es
- Logging structur√© fonctionnel
- Utilitaires de base test√©s

#### Jour 5 : Tests et Qualit√©
**T√¢ches :**
- [ ] Configurer pytest avec coverage
- [ ] Cr√©er tests unitaires pour modules de base
- [ ] Configurer pre-commit hooks
- [ ] Impl√©menter linting (black, flake8, mypy)

**Configuration pytest :**
```ini
# pytest.ini
[tool:pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = 
    --cov=src
    --cov-report=html
    --cov-report=term-missing
    --strict-markers
```

**Crit√®res d'acceptation :**
- Tests unitaires > 80% coverage
- Pre-commit hooks fonctionnels
- Code format√© automatiquement
- Type checking activ√©

### Semaine 2 : Modules Core

#### Jour 6-7 : Module Core
**T√¢ches :**
- [ ] Cr√©er classes de base abstraites
- [ ] Impl√©menter gestionnaire d'√©v√©nements
- [ ] Cr√©er syst√®me de plugins
- [ ] D√©velopper utilitaires de validation

**Classes de base :**
```python
# src/core/base.py
from abc import ABC, abstractmethod
from typing import Any, Dict, Optional

class BaseCollector(ABC):
    """Classe de base pour tous les collecteurs"""
    
    @abstractmethod
    async def collect(self) -> Dict[str, Any]:
        pass
    
    @abstractmethod
    async def start(self) -> None:
        pass
    
    @abstractmethod
    async def stop(self) -> None:
        pass

class BaseParser(ABC):
    """Classe de base pour tous les parseurs"""
    
    @abstractmethod
    def parse(self, raw_log: str) -> Dict[str, Any]:
        pass
    
    @abstractmethod
    def validate(self, parsed_log: Dict[str, Any]) -> bool:
        pass
```

**Crit√®res d'acceptation :**
- Classes abstraites d√©finies
- Syst√®me d'√©v√©nements fonctionnel
- Architecture plugin impl√©ment√©e
- Validation des donn√©es active

#### Jour 8-9 : Storage Layer
**T√¢ches :**
- [ ] Impl√©menter couche d'abstraction base de donn√©es
- [ ] Cr√©er mod√®les SQLAlchemy
- [ ] Configurer migrations Alembic
- [ ] D√©velopper repository pattern

**Mod√®les de donn√©es :**
```python
# src/storage/models.py
from sqlalchemy import Column, Integer, String, DateTime, Text, ForeignKey
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import relationship

Base = declarative_base()

class LogEntry(Base):
    __tablename__ = 'log_entries'
    
    id = Column(Integer, primary_key=True)
    timestamp = Column(DateTime, nullable=False)
    level = Column(String(10), nullable=False)
    component = Column(String(100))
    message = Column(Text, nullable=False)
    raw_log = Column(Text, nullable=False)
    created_at = Column(DateTime, default=datetime.utcnow)
    
    # Relations
    diagnostics = relationship("Diagnostic", back_populates="log_entry")

class Diagnostic(Base):
    __tablename__ = 'diagnostics'
    
    id = Column(Integer, primary_key=True)
    log_entry_id = Column(Integer, ForeignKey('log_entries.id'))
    agent_type = Column(String(50), nullable=False)
    diagnosis = Column(Text)
    confidence = Column(Integer)  # 1-100
    created_at = Column(DateTime, default=datetime.utcnow)
    
    # Relations
    log_entry = relationship("LogEntry", back_populates="diagnostics")
```

**Crit√®res d'acceptation :**
- Base de donn√©es SQLite configur√©e
- Mod√®les SQLAlchemy fonctionnels
- Migrations Alembic op√©rationnelles
- Repository pattern impl√©ment√©

#### Jour 10 : Int√©gration et Tests
**T√¢ches :**
- [ ] Tests d'int√©gration modules core
- [ ] Validation performance de base
- [ ] Documentation technique
- [ ] Scripts de d√©ploiement

**Tests d'int√©gration :**
```python
# tests/integration/test_core_integration.py
import pytest
from src.core.config import ConfigManager
from src.storage.database import DatabaseManager

@pytest.mark.asyncio
async def test_full_stack_integration():
    """Test int√©gration compl√®te des modules core"""
    # Setup
    config = ConfigManager()
    db = DatabaseManager(config)
    
    # Test connexion base
    await db.connect()
    assert db.is_connected()
    
    # Test cr√©ation tables
    await db.create_tables()
    
    # Cleanup
    await db.disconnect()
```

**Crit√®res d'acceptation :**
- Tests d'int√©gration passent
- Performance baseline √©tablie
- Documentation √† jour
- Scripts de d√©ploiement test√©s

## üîß Configuration Technique

### Environnement de D√©veloppement
```bash
# Installation
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate     # Windows

pip install -r requirements-dev.txt

# Configuration Ollama
ollama pull llama3.1:7b
ollama serve
```

### Variables d'Environnement
```bash
# .env
APP_ENV=development
LOG_LEVEL=DEBUG
DATABASE_URL=sqlite:///data/logs.db
OLLAMA_HOST=localhost
OLLAMA_PORT=11434
OLLAMA_MODEL=llama3.1:7b
```

### Docker Configuration
```dockerfile
# Dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY src/ src/
COPY config/ config/

CMD ["python", "-m", "src.main"]
```

## üìä M√©triques de Succ√®s

### M√©triques Techniques
- **Coverage tests** : > 80%
- **Performance** : Startup < 5 secondes
- **M√©moire** : < 100MB au d√©marrage
- **Logs** : Structured logging fonctionnel

### M√©triques Qualit√©
- **Linting** : 0 erreurs flake8
- **Type checking** : 0 erreurs mypy
- **Documentation** : Tous modules document√©s
- **Tests** : Tous modules test√©s

### M√©triques Fonctionnelles
- **Configuration** : Chargement dynamique OK
- **Base de donn√©es** : Connexion et migrations OK
- **Logging** : Rotation et r√©tention OK
- **Plugins** : Architecture extensible OK

## üö® Risques et Mitigation

### Risques Techniques
| Risque | Probabilit√© | Impact | Mitigation |
|--------|-------------|---------|------------|
| Probl√®me installation Ollama | Moyenne | √âlev√© | Documentation d√©taill√©e + scripts automatis√©s |
| Performance SQLite | Faible | Moyen | Tests de charge + optimisation requ√™tes |
| Complexit√© architecture | Moyenne | Moyen | Revue code + simplification si n√©cessaire |

### Risques Projet
| Risque | Probabilit√© | Impact | Mitigation |
|--------|-------------|---------|------------|
| Retard planning | Moyenne | Moyen | Buffer temps + priorisation features |
| Scope creep | √âlev√©e | √âlev√© | D√©finition claire MVP + revues r√©guli√®res |

## üìù Checklist de Fin de Sprint

### Code
- [ ] Tous les modules core impl√©ment√©s
- [ ] Tests unitaires > 80% coverage
- [ ] Tests d'int√©gration passent
- [ ] Code review effectu√©e
- [ ] Documentation technique compl√®te

### Infrastructure
- [ ] Environnement de d√©veloppement document√©
- [ ] Scripts d'installation test√©s
- [ ] Configuration Docker fonctionnelle
- [ ] Base de donn√©es initialis√©e

### Qualit√©
- [ ] Linting et formatting configur√©s
- [ ] Pre-commit hooks actifs
- [ ] Type checking activ√©
- [ ] Monitoring basique en place

### Documentation
- [ ] Guide d'installation √† jour
- [ ] Architecture document√©e
- [ ] Standards de codage d√©finis
- [ ] README projet complet

## üéØ Crit√®res de Passage Sprint 2

Pour passer au Sprint 2, tous ces crit√®res doivent √™tre valid√©s :

1. **Infrastructure** : Environnement de d√©veloppement stable
2. **Architecture** : Modules core fonctionnels et test√©s
3. **Qualit√©** : Standards de code respect√©s
4. **Documentation** : Guide d√©veloppeur complet
5. **Tests** : Coverage > 80% et tests d'int√©gration OK

---

**üöÄ Objectif : Fondations solides pour acc√©l√©rer les sprints suivants**

*Derni√®re mise √† jour : 07/01/2025*